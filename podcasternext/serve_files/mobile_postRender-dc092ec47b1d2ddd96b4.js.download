(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"2A6Q":function(e,t,s){"use strict";var a=s("q1tI"),r=s.n(a),n=s("pqiZ"),i=s("8fuX"),o=s("wldR");class l extends o.a{static renderDivider(){return r.a.createElement(n.a,{size:37})}renderComponent(){const{device:e}=this.environment,{children:t,controlRow:s}=this.props,a=()=>e.isMobile?18:60,n=()=>e.isMobile?18:36;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",width:"100%",height:"100%",backgroundColor:this.theme.contentBackground}},r.a.createElement(i.b,{type:i.a.All,style:{flexGrow:1,WebkitOverflowScrolling:"touch",transform:"translateZ(0)",paddingLeft:a(),paddingRight:a(),paddingTop:n(),paddingBottom:n()}},t),s&&r.a.createElement("div",{style:{flexGrow:0,flexShrink:0,paddingLeft:a(),paddingRight:a(),paddingTop:16,paddingBottom:16,boxShadow:"0 -1px 0 ".concat(this.theme.regularDividerColor)}},s))}}t.a=l},"3wHm":function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("LvDl"),r=s.n(a),n=s("q1tI"),i=s.n(n),o=s("vDOa"),l=s("5/h/"),d=s("Mr7a"),c=s("sdlW"),m=s("mjq6"),p=s("gyBu"),u=s("tvfY"),g=s("wldR"),h=s("pqiZ"),b=s("H4VD"),f=s("wpmu"),y=s("g4rC"),S=s("i3uR"),w=s("WgIs"),M=s("gbGO"),v=s("sbdd"),E=s("2Y+N"),P=s("zTdN"),O=s("VBxf"),C=s("bkwR"),k=s("nM47"),j=s("/YYm"),T=s("MBf9"),I=s("LeVO"),F=s("ZQ9l"),B=s("y6Dp"),L=s("hvW1"),x=s("IULH"),D=s("d9nj"),R=s("mF3+"),A=s("Cycz"),G=s("r8MX"),U=s("J9+s"),N=s("HRSx");function V(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?V(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):V(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const H=Object(U.defineMessages)({removingGuest:{id:"guestPagesPopup.removeGuest.updatingMessage",defaultMessage:"Updating…"},addingMember:{id:"guestPagesPopup.addMemberPermission.updatingMessage",defaultMessage:"Updating…"}});class z extends g.a{constructor(){super(...arguments),this.storeTypes={buttonPopupStore:y.a},this.renderPopup=()=>{const{device:e}=this.environment,{store:t,guest:s}=this.props,a=t.canAdmin(),r=s.guestPageIds.map(e=>{const s=f.a.createChildStore(t,{table:N.b,id:e});return{key:e,render:e=>i.a.createElement(v.a,Object.assign({},e,{store:s,placeholder:i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.privatePagePlaceholder",defaultMessage:"Private page"})})),action:()=>{const s=f.a.createChildStore(t,{table:N.b,id:e}),a=Object(j.a)({store:s,fullyQualified:!1});b.navigate({environment:this.environment,url:a,metaClick:!0})}}});let n,o;return n=e.isMobile?{menuType:M.b.MenuType.ActionSheet}:{menuType:M.b.MenuType.Popup,width:300},Object(A.L)(this.environment)&&(o=i.a.createElement(I.a,{renderTooltip:()=>this.isSubscribed()?i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.tooltip",defaultMessage:"This guest will become a member of this workspace."}):i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.tooltip",defaultMessage:"This guest will become an admin of this workspace."}),render:e=>i.a.createElement(x.a,Object.assign({isLarge:!0,onClick:this.handleConvertToMemberClick},e),this.isSubscribed()?i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.addMemberPermissionButton.label",defaultMessage:"Convert to member"}):i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.addAdminPermissionButton.label",defaultMessage:"Convert to admin"}))})),i.a.createElement(M.b,Object.assign({},n),a&&i.a.createElement(F.a,{title:i.a.createElement("div",{style:{paddingTop:12,paddingBottom:8,display:"flex",alignItems:"flex-start"}},o,i.a.createElement(I.a,{renderTooltip:()=>i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.tooltip",defaultMessage:"This guest will be removed from all pages in this Workspace."}),render:e=>i.a.createElement(x.a,Object.assign({isLarge:!0,isRed:!0,style:{marginLeft:o?8:0},onClick:this.handleRemoveClick},e),i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.removeGuestButton.label",defaultMessage:"Remove"}))}))}),a&&i.a.createElement(P.a,{title:i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.guestAccessiblePagesCaption",defaultMessage:"This guest can access these pages"})}),i.a.createElement(w.a,{type:w.a.Type.Vertical,initialFocus:0,sections:[{key:"pages",render:e=>i.a.createElement(E.a,Object.assign({},e)),items:r}]}))},this.handleRemoveClick=()=>{O.showDialog({showCancel:!0,keepFocus:!1,message:i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.confirmationMessage",defaultMessage:"Are you sure you want to remove this person? They will lose access to all shared pages."}),items:[{label:i.a.createElement(U.FormattedMessage,{id:"guestPagesPopup.removeGuestModal.removeButton.label",defaultMessage:"Remove"}),color:"red",onAccept:async()=>{const{guest:e,store:t}=this.props;this.stores.buttonPopupStore.setState(q({},this.stores.buttonPopupStore.state,{open:!1})),L.b({message:H.removingGuest}),"success"===(await C.removeUsersFromSpace(this.environment,{userIds:[e.userId],spaceId:t.id,removePagePermissions:!0,revokeUserTokens:!1})).type&&(await k.e(this.environment),B.Pd(this.environment)),L.a()}}]})},this.handleConvertToMemberClick=async()=>{const e=T.create(this.environment),{store:t,guest:s,isSubscribed:a}=this.props,r=d.f({environment:this.environment,store:t,permissionItems:[{type:"user_permission",role:a?"read_and_write":"editor",user_id:s.userId}],transaction:e});T.commit({environment:this.environment,transaction:e}),this.stores.buttonPopupStore.setState(q({},this.stores.buttonPopupStore.state,{open:!1})),L.b({message:H.addingMember});try{await r,await k.e(this.environment),B.bb(this.environment,{member_user_id:s.userId})}finally{L.a()}}}renderComponent(){const{device:e}=this.environment,{buttonPopupStore:t}=this.stores,{store:s,guest:a}=this.props;return a.guestPageIds.map(e=>{f.a.createChildStore(s,{table:N.b,id:e}).getValue()}),i.a.createElement(S.a,{popupType:e.isMobile?S.a.PopupType.SlideUp:S.a.PopupType.Popup,renderOrigin:e=>i.a.createElement(D.a,Object.assign({},e),i.a.createElement(U.FormattedMessage,{id:"guestPagesButton.label",defaultMessage:"{numberOfAccessiblePages, plural, one {{numberOfAccessiblePages} page} other {{numberOfAccessiblePages} pages}}",values:{numberOfAccessiblePages:a.guestPageIds.length}}),R.a.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),buttonPopupStore:t,render:this.renderPopup})}isSubscribed(){const{data:e}=G.default.state;return Boolean(e&&Object(A.E)(e))}}var W=Object(U.injectIntl)(z),Y=s("yNyh"),Q=s("yisX"),J=s("2A6Q"),Z=s("aEEb"),X=s("Sb6f");function K(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?K(Object(s),!0).forEach((function(t){ee(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ee(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class te extends g.a{renderComponent(){const{columns:e,rows:t}=this.props;return i.a.createElement("table",{style:this.getStyle()},i.a.createElement("thead",null,i.a.createElement("tr",{style:te.headerRowStyle},e.map(e=>i.a.createElement("th",{key:e.key,style:$({},te.tableHeaderStyle,{},e.style)},i.a.createElement(Z.a,{isSmall:!0},e.header))))),i.a.createElement("tbody",null,t.map(t=>i.a.createElement("tr",{key:t.key,style:this.getRowStyle()},t.columns.map((t,s)=>{const a=e[s];return i.a.createElement("td",{key:a.key,style:te.cellStyle},t)})))))}getStyle(){return{width:"100%",fontSize:13,borderTop:"1px solid ".concat(this.theme.regularDividerColor),borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}getRowStyle(){return{width:"100%",borderTop:"1px solid ".concat(this.theme.regularDividerColor)}}}te.cellPaddingTopBottom=8,te.headerRowStyle={height:32,width:"100%"},te.tableHeaderStyle={fontWeight:X.a.fontWeight.regular,textAlign:"left",paddingTop:te.cellPaddingTopBottom,paddingBottom:te.cellPaddingTopBottom},te.cellStyle={paddingTop:te.cellPaddingTopBottom,paddingBottom:te.cellPaddingTopBottom};var se=te,ae=s("R+Q+"),re=s("FUUC"),ne=s("GojS"),ie=s("Oy36"),oe=s("LEzx");class le extends oe.a{getInitialState(){return{userInputValue:"",temporaryUserIds:[],limitUsers:!0}}}var de=le,ce=s("wXH4"),me=s("ox2z"),pe=s("bTAb"),ue=s("Pl3d"),ge=s("4HCU"),he=s("f0kS"),be=s("W3at"),fe=s("NOLh"),ye=s("bFnu"),Se=s("x4bP"),we=s("EZe4"),Me=s("V9q8"),ve=s("VyA+"),Ee=s("meF8"),Pe=s("CTEM"),Oe=s("iICV"),Ce=s("Ng05"),ke=s("lCCU"),je=s("WLsh"),Te=s("QcDD"),Ie=s("JMnu"),Fe=s("8f5p");function Be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function Le(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(s),!0).forEach((function(t){xe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Be(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class De extends g.a{constructor(){super(...arguments),this.storeTypes={spacePermissionGroupStore:de,actionMenuButtonPopupStore:y.a,addMemberButtonPopupStore:y.a,autocompleteStore:pe.a,mouseStore:ye.a},this.renderUser=e=>{const{store:t,group:s,disabled:a}=this.props;return i.a.createElement("div",{key:e.id,style:{display:"flex",alignItems:"center"}},i.a.createElement(ne.a,{userValue:e,style:{paddingRight:6,minHeight:34,lineHeight:1.2,width:"100%"},avatarSize:24}),!a&&i.a.createElement(D.a,{onClick:async()=>{if(await O.confirmUserAction({message:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationMessage",defaultMessage:"Are you sure you want to remove this member?"}),acceptLabel:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupDialog.confirmationButton.label",defaultMessage:"Yes"})})){const a=(s.user_ids||[]).filter(t=>t!==e.id),r=Le({},s,{user_ids:a});T.createAndCommit(this.environment,e=>{c.w({spaceStore:t,group:r,transaction:e})}),B.Ad(this.environment)}}},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.removeMemberFromGroupButton.label",defaultMessage:"Remove"})))},this.renderActionMenu=()=>{const e={key:"action_menu",render:e=>i.a.createElement(E.a,Object.assign({},e)),items:[{key:"rename",render:e=>i.a.createElement(me.a,Object.assign({},e,{title:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.renameItem",defaultMessage:"Rename"})})),action:this.handleRename},{key:"delete",render:e=>i.a.createElement(me.a,Object.assign({},e,{title:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.actionMenu.deleteItem",defaultMessage:"Delete"})})),action:this.handleDelete}]};return i.a.createElement(M.b,{menuType:M.b.MenuType.Popup},i.a.createElement(w.a,{type:w.a.Type.Vertical,initialFocus:0,sections:[e],onAccept:()=>{this.stores.actionMenuButtonPopupStore.reset()}}))},this.renderAddMemberMenu=()=>{const{store:e}=this.props,{userInputValue:t,temporaryUserIds:s}=this.stores.spacePermissionGroupStore.state,a={request:{query:t,temporaryUserIds:this.stores.spacePermissionGroupStore.state.temporaryUserIds},performRequest:async e=>{let{query:t,temporaryUserIds:s}=e;const{group:a}=this.props,r=a.user_ids||[];return(await ge.l({environment:this.environment,query:t,membersOnly:!0})).filter(e=>r.indexOf(e.id)<0&&s.indexOf(e.id)<0).slice(0,20)},render:this.renderAddMemberResults},r=s.map(t=>{const a=e.getRecordValue({table:l.a,id:t});return i.a.createElement(Ie.b,{key:t,userValue:a,format:Ie.b.Format.Medium,showRemoveButton:!0,onClickRemove:()=>{const e=s.filter(e=>e!==t);this.stores.spacePermissionGroupStore.setState(Le({},this.stores.spacePermissionGroupStore.state,{temporaryUserIds:e}))},shouldShrink:!0,isSingle:!1})});return i.a.createElement(M.b,{menuType:M.b.MenuType.Popup,tokenInputHeader:!0,header:i.a.createElement(be.a,{focus:!0,disabled:!1,focusAfterAnimation:!0,format:be.a.Format.Group,tokens:r,placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.userSearchInput.placeholder",defaultMessage:"Search for a person…"}),onRemoveLastToken:this.handleTokenInputMenuItemRemoveLastToken,value:t,onChange:this.handleTokenInputMenuItemChange,right:i.a.createElement(Ce.a,{isLarge:!0,onClick:this.handleAddDoneClick},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.addUserButton.label",defaultMessage:"Add"}))})},i.a.createElement(ue.a,Object.assign({},a)))},this.renderAddMemberResults=(e,t)=>{const{store:s}=this.props,a=t||[],{temporaryUserIds:r}=this.stores.spacePermissionGroupStore.state,n=a.map(e=>{let{id:t}=e;return t});if(0===n.length)return i.a.createElement(E.a,null,i.a.createElement(P.a,{title:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.searchUserDropdown.noResultsMessage",defaultMessage:"No results"})}));{const e={key:"user_menu",render:e=>i.a.createElement(E.a,Object.assign({},e)),items:n.map(e=>{const t=u.a.createChildStore(s,{table:l.a,id:e}).getValue();return{key:e,render:e=>i.a.createElement(he.a,Object.assign({},e,{user:t})),action:()=>{const t=[...r,e];this.stores.spacePermissionGroupStore.setState(Le({},this.stores.spacePermissionGroupStore.state,{temporaryUserIds:t,userInputValue:""}))}}})};return i.a.createElement(w.a,{type:w.a.Type.Vertical,initialFocus:0,sections:[e]})}},this.handleMouseEnter=e=>{this.stores.mouseStore.setState(Le({},this.stores.mouseStore.state,{mouseEntered:!0}))},this.handleMouseLeave=e=>{this.stores.mouseStore.setState(Le({},this.stores.mouseStore.state,{mouseEntered:!1}))},this.handleMouseDown=e=>{Object(Me.a)(e.target,e=>e&&e.classList&&e.classList.contains(De.dragHandleClass))||Object(we.c)(e)},this.handleIconChange=e=>{const{store:t,group:s}=this.props,a=Le({},s,{icon:e});T.createAndCommit(this.environment,e=>{c.w({spaceStore:t,group:a,transaction:e})}),B.Dd(this.environment,{is_emoji:Object(Pe.a)(e)})},this.handleRename=()=>{const{group:e,spacePermissionsSettingsStore:t}=this.props;t.setState(Le({},t.state,{editingNameGroupId:e.id,groupNameInputValue:e.name||""})),this.stores.actionMenuButtonPopupStore.setState(Le({},this.stores.actionMenuButtonPopupStore.state,{open:!1})),B.Bd(this.environment)},this.handleDelete=async()=>{const{store:e,group:t}=this.props;if(this.stores.actionMenuButtonPopupStore.setState(Le({},this.stores.actionMenuButtonPopupStore.state,{open:!1})),await O.confirmUserAction({message:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationMessage",defaultMessage:"Are you sure you want to delete this group? Any pages that are private to this group will be transferred to you."}),acceptLabel:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.deleteGroupModal.confirmationButton.label",defaultMessage:"Yes"})})){const s=T.create(this.environment);await c.g({environment:this.environment,spaceStore:e,group:t,transaction:s}),T.commit({environment:this.environment,transaction:s}),B.zd(this.environment)}},this.handleNameChange=e=>{this.props.spacePermissionsSettingsStore.setState(Le({},this.props.spacePermissionsSettingsStore.state,{groupNameInputValue:e}))},this.handleNameCancel=()=>{const{spacePermissionsSettingsStore:e}=this.props;e.setState(Le({},e.state,{editingNameGroupId:void 0,groupNameInputValue:""}))},this.handleNameAccept=()=>{const{store:e,group:t,spacePermissionsSettingsStore:s}=this.props,{editingNameGroupId:a,groupNameInputValue:r}=s.state;if(a===t.id){if(r!==t.name){const s=Le({},t,{name:r});T.createAndCommit(this.environment,t=>{c.w({spaceStore:e,group:s,transaction:t})})}s.setState(Le({},s.state,{editingNameGroupId:void 0,groupNameInputValue:""}))}},this.handleTokenInputMenuItemRemoveLastToken=()=>{const{temporaryUserIds:e}=this.stores.spacePermissionGroupStore.state,t=e.slice(0,e.length-1);this.stores.spacePermissionGroupStore.setState(Le({},this.stores.spacePermissionGroupStore.state,{temporaryUserIds:t}))},this.handleTokenInputMenuItemChange=e=>{const t=e.target.value,{spacePermissionGroupStore:s}=this.stores,{extractedEmails:a,newInputValue:n}=Object(je.a)(t),{currentSpaceStore:i}=Te.default.state,{data:o}=G.default.state;if(!o||!i)return;const d=Object(A.w)(o).map(e=>e.userId),c=r.a.compact(d.map(e=>u.a.createChildStore(i,{table:l.a,id:e}).getValue())).filter(e=>a.includes(e.email)&&!s.state.temporaryUserIds.includes(e.id));s.setState(Le({},s.state,{temporaryUserIds:[...s.state.temporaryUserIds,...c.map(e=>e.id)],userInputValue:n}))},this.handleAddDoneClick=()=>{const{store:e,group:t}=this.props,{temporaryUserIds:s}=this.stores.spacePermissionGroupStore.state,a=t.user_ids||[],n=Le({},t,{user_ids:r.a.union(a,s)});T.createAndCommit(this.environment,t=>{c.w({spaceStore:e,group:n,transaction:t})}),this.stores.spacePermissionGroupStore.reset(),this.stores.addMemberButtonPopupStore.setState(Le({},this.stores.addMemberButtonPopupStore.state,{open:!1})),B.xd(this.environment,{add_member_count:s.length})},this.handleAddMemberButtonPopupClose=()=>{this.stores.spacePermissionGroupStore.reset()},this.handleShowMoreClick=()=>{this.stores.spacePermissionGroupStore.setState(Le({},this.stores.spacePermissionGroupStore.state,{limitUsers:!1}))}}renderComponent(){const{store:e,group:t,spacePermissionsSettingsStore:s,disabled:a}=this.props,{groupsFilter:n}=s.state,{limitUsers:o}=this.stores.spacePermissionGroupStore.state,d=Fe.a({intl:this.props.intl,group:t}),{countRemainingUsers:c,totalNumberMembers:p,limitedUserValues:u}=Fe.b({group:t,spaceStore:e,limit:o&&!n?De.defaultLimit:void 0}),g=r.a.sortBy(u,e=>Object(l.f)(e)),b=n?Object(m.b)(n,g,e=>Object(l.f)(e)):g,{mouseEntered:f}=this.stores.mouseStore.state,y=f&&!Oe.a.state.isKeyboardMode&&!a,{editingNameGroupId:w,groupNameInputValue:M}=s.state;return i.a.createElement("div",{style:{marginBottom:36,fontSize:14,width:"100%"},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseDown:this.handleMouseDown},i.a.createElement("div",{style:{display:"flex"}},!a&&i.a.createElement(fe.a,{isVisible:!0,animationStyle:{opacity:y?1:0},enterAnimationStyle:{opacity:0},exitAnimationStyle:{opacity:0},render:()=>i.a.createElement("div",{style:{marginLeft:-24,marginRight:4},className:De.dragHandleClass},i.a.createElement(Se.a,{hideClickMessage:!0}))}),a?i.a.createElement(ie.a,{disabled:!0,icon:t.icon?{table:e.table,id:e.id,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:d,style:{marginLeft:3,marginRight:3}}):i.a.createElement(ie.a,{disabled:!1,bucket:"public",icon:t.icon?{table:e.table,id:e.id,icon:t.icon}:void 0,size:22,isEmptyPage:!1,title:d,onChange:this.handleIconChange,style:{marginLeft:3,marginRight:3}}),w===t.id?i.a.createElement(ve.a,{capture:!0,onEsc:this.handleNameCancel},i.a.createElement(Ee.a,{disabled:a,textarea:!1,style:{marginLeft:4,cursor:"text",fontWeight:X.a.fontWeight.semibold},placeholderStyle:{marginLeft:4,cursor:"text",color:this.theme.lightTextColor,fontWeight:X.a.fontWeight.semibold},placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.userGroup.groupNameInput.placeholder",defaultMessage:"Untitled"}),focus:!0,value:M,onChange:this.handleNameChange,onBlur:this.handleNameAccept,onSubmit:this.handleNameAccept})):i.a.createElement(D.a,{isSmall:!0,style:{fontWeight:X.a.fontWeight.semibold,marginLeft:-2,marginTop:-1},onClick:this.handleRename,disabled:a,className:"notranslate"},d),p>0&&i.a.createElement("div",{style:{alignItems:"center",marginLeft:8,color:this.theme.mediumTextColor},className:"notranslate"},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.userGroup.memberCount",defaultMessage:"{numberOfGroupMembers, plural, one {{numberOfGroupMembers} member} other {{numberOfGroupMembers} members}}",values:{numberOfGroupMembers:p}})),i.a.createElement("div",{style:{flexGrow:1}}),!a&&i.a.createElement(S.a,{popupType:ce.b.Popup,render:this.renderActionMenu,buttonPopupStore:this.stores.actionMenuButtonPopupStore,renderOrigin:e=>i.a.createElement(ke.a,Object.assign({icon:R.a.dots},e))})),i.a.createElement(h.a,{size:12}),b.map(this.renderUser),c>0&&i.a.createElement("div",null,i.a.createElement(D.a,{isGray:!0,style:{marginTop:4},onClick:this.handleShowMoreClick},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.showMoreUsersButton.label",defaultMessage:"{numberOfHiddenUsers, plural, one {Show {numberOfHiddenUsers} more} other {Show {numberOfHiddenUsers} more}}",values:{numberOfHiddenUsers:c}}))),!a&&i.a.createElement(S.a,{popupType:ce.b.Popup,render:this.renderAddMemberMenu,buttonPopupStore:this.stores.addMemberButtonPopupStore,onClose:this.handleAddMemberButtonPopupClose,style:{width:400},renderOrigin:e=>i.a.createElement("div",null,i.a.createElement(D.a,Object.assign({isGray:!0,icon:R.a.plus,style:{marginTop:4}},e),i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.groupList.addMemberButton.label",defaultMessage:"Add members"})))}))}}De.dragHandleClass="drag_handle",De.defaultLimit=10;var Re=Object(U.injectIntl)(De),Ae=s("g8hj"),Ge=s("vJXr"),Ue=s("toub"),Ne=s("IYZQ"),Ve=s("bxQm"),qe=s("sSHh"),_e=s("58VE"),He=s("lEhh"),ze=s("aZ00"),We=s("wlCD"),Ye=s("0CAA"),Qe=s("rQb/"),Je=s("L0YQ"),Ze=s("VhAz"),Xe=s("gHFd"),Ke=s("qX+M");function $e(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function et(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(s),!0).forEach((function(t){tt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$e(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function tt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class st extends g.a{constructor(){super(...arguments),this.storeTypes={spacePermissionsSettingsStore:p.b},this.renderSpaceGroup=e=>{const{store:t}=this.props,{spacePermissionsSettingsStore:s}=this.stores;return i.a.createElement(Re,{key:e.id,store:t,group:e,spacePermissionsSettingsStore:s,disabled:!this.canEditGroups()})},this.handleUpdateClick=()=>{const e=Object(U.defineMessages)({updatingPermissions:{id:"spacePermissionsSettings.updatePermissionsMessage",defaultMessage:"Updating…"}});L.b({message:e.updatingPermissions})},this.handleUpdateComplete=()=>{L.a()},this.handleTabClick=e=>{const t=e;switch(t){case p.a.Members:B.Ed(this.environment,{tab:"members"});break;case p.a.Groups:B.Ed(this.environment,{tab:"groups"});break;case p.a.Guests:B.Ed(this.environment,{tab:"guests"});break;default:return Object(Ze.e)(t)}this.stores.spacePermissionsSettingsStore.setState(et({},this.stores.spacePermissionsSettingsStore.state,{currentTab:e}))},this.handleCreateGroupClick=()=>{T.createAndCommit(this.environment,e=>{const t=c.d({spaceStore:this.props.store,transaction:e});t&&this.stores.spacePermissionsSettingsStore.setState(et({},this.stores.spacePermissionsSettingsStore.state,{editingNameGroupId:t.id,groupNameInputValue:""}))}),B.yd(this.environment)},this.handleGroupReorder=e=>{const t=this.props.store.getValue();if(t){const s=t.permission_groups||[],a=r.a.compact(e.map(e=>s.find(t=>t.id===e)));T.createAndCommit(this.environment,e=>{c.x({spaceStore:this.props.store,groups:a,transaction:e})})}B.Cd(this.environment)},this.handleFilterChange=e=>{this.stores.spacePermissionsSettingsStore.setState(et({},this.stores.spacePermissionsSettingsStore.state,{groupsFilter:e.target.value}))},this.handleMembersShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState(et({},this.stores.spacePermissionsSettingsStore.state,{limitMembers:!1}))},this.handleGuestsShowMoreClick=()=>{this.stores.spacePermissionsSettingsStore.setState(et({},this.stores.spacePermissionsSettingsStore.state,{limitGuests:!1}))},this.handleInviteLinkClick=()=>{const e=!this.getInviteLinkEnabled();B.dc(this.environment,{enabled:e}),T.createAndCommit(this.environment,t=>{c.t({transaction:t,spaceStore:this.props.store,inviteLinkEnabled:Boolean(e)})})},this.handleMemberPermissionRoleChange=async(e,t,s)=>{const{store:a}=this.props,r=this.environment.currentUser.id;if(e.userId===r&&"none"===t){await c.l({environment:this.environment,spaceId:a.id,userSettingsStore:s})&&Ue.a.setState(et({},Ue.a.state,{open:!1}))}else this.handleUpdateClick(),"none"===t?(await C.removeUsersFromSpace(this.environment,{userIds:[e.userId],spaceId:a.id,removePagePermissions:!0,revokeUserTokens:!0}),await k.e(this.environment)):await T.createAndCommit(this.environment,s=>d.f({environment:this.environment,store:a,permissionItems:[{type:"user_permission",role:t,user_id:e.userId}],transaction:s})),this.handleUpdateComplete()}}renderComponent(){const{store:e,isMobile:t}=this.props;if(!Ge.a.state.online)return this.renderOfflineMessage();const{data:s}=G.default.state;if(!s)return this.renderLoadingSpinner();const a=A.w(s);if(!r.a.every(a.map(t=>u.a.createChildStore(e,{table:l.a,id:t.userId}).isReady())))return this.renderLoadingSpinner();const d=a.filter(o.c),c=a.filter(o.b),{currentTab:m}=this.stores.spacePermissionsSettingsStore.state;if(t)return i.a.createElement(n.Fragment,null,this.canAdmin()&&i.a.createElement(E.a,{shouldShowBottomDivider:!0},this.renderMobileInviteButton(),i.a.createElement("div",{style:this.mobileMenuItemStyle()},this.renderInviteLink())),i.a.createElement(E.a,null,this.renderSpaceMembers(d)));const p=[i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.membersTab.title",defaultMessage:"Members ({numberOfMembers})",values:{numberOfMembers:d.length}}),i.a.createElement(U.FormattedMessage,{id:"spaceBasicSettings.groupsTab.title",defaultMessage:"Groups"})];return c.length>0&&p.push(i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.guestsTab.title",defaultMessage:"Guests ({numberOfGuests})",values:{numberOfGuests:c.length}})),i.a.createElement(J.a,null,i.a.createElement(ae.a,{tabs:p,selectedIndex:m,onChange:this.handleTabClick,style:{paddingLeft:0,paddingRight:0,marginTop:-6,marginBottom:14},tabStyle:{fontSize:16}}),this.renderTab(m,d,c))}renderLoadingSpinner(){return i.a.createElement(We.a,{style:{margin:"calc(50% - 1em) auto"}})}renderOfflineMessage(){return i.a.createElement(Z.a,{isSmall:!0,style:{textAlign:"center"}},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.offlineMessage",defaultMessage:"Please go online to manage members."}))}renderHelp(){return i.a.createElement("div",{style:{marginTop:24,marginBottom:24}},i.a.createElement(qe.a,{title:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.helpButton.caption",defaultMessage:"Learn about adding members to your workspace"}),href:Object(Ye.a)("guides.members"),analyticsFrom:"members_settings"}))}renderTab(e,t,s){return e===p.a.Members?i.a.createElement(n.Fragment,null,this.renderSpaceMembers(t)):e===p.a.Guests?i.a.createElement(n.Fragment,null,this.renderSpaceGuests(s)):this.renderGroupsTab()}renderGroupsTab(){const{store:e}=this.props,{groupsFilter:t}=this.stores.spacePermissionsSettingsStore.state,s=e.getValue(),a=this.canUseGroups(),r=this.canEditGroups();if(s){const e=s.permission_groups||[];return i.a.createElement("div",null,a?i.a.createElement(Z.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.caption",defaultMessage:"Set up groups to conveniently control page permissions from the share menu."})):i.a.createElement(Je.a,{for:"team",from:"permission_groups",icon:R.a.group,title:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeTitle",defaultMessage:"Upgrade to create groups"}),caption:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeCaption",defaultMessage:"Upgrade to the Team Plan to set up groups and control permissions from the share menu."}),learnMoreRoute:"guides.groups"}),i.a.createElement(h.a,{size:24,isHidden:!0}),i.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"}},a&&i.a.createElement(I.a,{renderTooltip:()=>this.canAdmin()?i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.upgradeMessage",defaultMessage:"Upgrade to Team or Enterprise to use permission groups."}):i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.adminsOnly",defaultMessage:"Only admins can add a permission group."}),render:e=>i.a.createElement(Ce.a,Object.assign({isLarge:!0,onClick:this.handleCreateGroupClick,disabled:!r},r?void 0:e),i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.groupsTab.createGroupButton.label",defaultMessage:"Create a group"}))}),e.length>0&&i.a.createElement(Y.b,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.groupsTab.filterGroupsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:R.a.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:Y.b.Format.Small,value:t,style:et({},st.filterStyle,{marginRight:0}),onChange:this.handleFilterChange})),e.length>0&&i.a.createElement(h.a,{size:24,style:{marginBottom:24}}),r?i.a.createElement(Ae.b,{direction:Ae.a.Vertical,keys:e.map(e=>e.id),renderKey:(t,s)=>this.renderSpaceGroup(e[s]),isFullWidth:!0,onDrop:this.handleGroupReorder}):i.a.createElement("div",null,e.map(this.renderSpaceGroup)))}}renderSpaceMembers(e){return this.props.isMobile?this.renderMobileMemberList(e):i.a.createElement("div",null,!this.shouldRenderUpsell()&&this.renderHelp(),this.shouldRenderUpsell()&&this.renderUpsell(),this.renderInviteLink(),this.renderDesktopMemberList(e))}renderInviteLink(){if(!this.canUseInviteLink())return;const e=this.getInviteLink(),t=this.getInviteLinkEnabled();if(!e)return;const{spacePermissionsSettingsStore:s}=this.stores;return i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",cursor:"pointer"}},i.a.createElement("div",{style:{marginRight:8,flexGrow:1}},i.a.createElement(Qe.a,null,i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.title",defaultMessage:"Invite link"})),i.a.createElement(Z.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"85%"}},i.a.createElement(U.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.caption",defaultMessage:"Share this secret link to invite people to this workspace. Only admins can see this."})," ",!this.props.isMobile&&this.renderInviteLinkReset())),i.a.createElement("div",{style:{marginTop:5}},i.a.createElement(He.a,{on:t,onClick:this.handleInviteLinkClick}))),s&&t&&e&&this.renderInviteLinkUrl(e),i.a.createElement(h.a,{size:40}))}renderInviteLinkReset(){var e=this;return i.a.createElement(U.FormattedMessage,{id:"spacePermissionSettings.spaceMembers.inviteLink.resetLink",defaultMessage:"You can <resetlink>reset the link</resetlink> to generate a new invite link.",values:{resetlink:function(){const{store:t}=e.props,s=t.getValue();if(s){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return i.a.createElement(Ne.a,{onClick:()=>{O.showDialog({message:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.description",defaultMessage:"Are you sure you want to reset your invite link? Your old one will no longer be able to be used."}),showCancel:!0,keepFocus:!1,handleCancel:O.dismissDialog,items:[{label:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.inviteLinkRefreshModal.accept",defaultMessage:"Reset"}),color:"red",onAccept:async()=>{await C.refreshInviteLink(e.environment,{spaceId:s.id}),k.e(e.environment)}}]})}},r)}}}})}renderInviteLinkUrl(e){const{reactNative:t}=this.environment,s=i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.copyButton",defaultMessage:"Copy link"}),a=()=>{ze.c({environment:this.environment,stringValue:e}),B.gf(this.environment)},r=()=>{t&&t.share(e),B.gf(this.environment)};return this.props.isMobile?i.a.createElement("div",null,i.a.createElement(Y.b,{type:"text",format:Y.a.Default,value:e,disabled:!0}),t?i.a.createElement(x.a,{onClick:r,style:{marginTop:10,width:"100%"}},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.inviteLink.shareButton",defaultMessage:"Share link"})):i.a.createElement(x.a,{onClick:a,style:{marginTop:10,width:"100%"}},s)):i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",marginTop:12}},i.a.createElement(Y.b,{type:"text",format:Y.a.Default,value:e,disabled:!0,style:{borderTopRightRadius:0,borderBottomRightRadius:0,width:"calc(100% - 90px)",height:32}}),i.a.createElement(Ce.a,{onClick:a,style:{borderTopLeftRadius:0,borderBottomLeftRadius:0,width:90},isLarge:!0},s)))}renderMobileMemberList(e){const{store:t}=this.props;return i.a.createElement(n.Fragment,null,e.map(e=>{const s=u.a.createChildStore(t,{table:l.a,id:e.userId}).getValue();return i.a.createElement("div",{style:{display:"flex",alignItems:"center",padding:10,borderBottom:"1px solid ".concat(this.theme.lightDividerColor),background:this.theme.contentBackground}},this.renderMember(s),i.a.createElement("div",{style:{textAlign:"center",marginLeft:"auto"}},this.renderUserPermission(e)))}))}renderUpsell(){const{data:e}=G.default.state,t=e&&!A.B(this.environment,e)&&"subscribed_admin"!==e.type?"team_free":"team";return i.a.createElement(i.a.Fragment,null,i.a.createElement(Je.a,{for:t,from:"members_settings",icon:R.a.membersFilled,title:i.a.createElement(U.FormattedMessage,{id:"spacePermissionSettings.memberUpsell.title",defaultMessage:"Share with unlimited members"}),caption:i.a.createElement(U.FormattedMessage,{id:"spacePermissionSettings.memberUpsell.caption",defaultMessage:"Try Notion for Teams for a collaborative workspace, unlimited team members, and advanced permissions."}),learnMoreRoute:"guides.members",upgradeMessage:"team_free"===t?i.a.createElement(U.FormattedMessage,{id:"spacePermissionSettings.memberUpsell.alternativeTrialLabel",defaultMessage:"Try it free"}):i.a.createElement(U.FormattedMessage,{id:"spacePermissionSettings.memberUpsell.alternativeUpgradeLabel",defaultMessage:"Upgrade to Team Plan"})}),i.a.createElement(h.a,{size:48}))}renderDesktopMemberList(e){const{spacePermissionsSettingsStore:t}=this.stores,{membersFilter:s,limitMembers:a}=t.state,r=this.getFilteredMembers(e,s),n=a?r.slice(0,st.defaultLimit):r;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{marginRight:8,flexGrow:1}},i.a.createElement(Qe.a,null,i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.spaceMembers.members.title",defaultMessage:"Members"}))),this.renderInviteViaDomainCaption(),i.a.createElement(h.a,{size:16,isHidden:!0}),i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},this.renderInviteButton(),i.a.createElement(Y.b,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterMembersInput.placeholder",defaultMessage:"Filter by email or name…"}),left:R.a.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:Y.b.Format.Small,value:s,style:st.filterStyle,onChange:e=>{t.setState(et({},t.state,{membersFilter:e.target.value,limitMembers:!0}))}})),this.renderUserTable(n),r.length>st.defaultLimit&&a&&i.a.createElement(Ve.a,{style:st.showMoreButtonStyle,onClick:this.handleMembersShowMoreClick},i.a.createElement(U.FormattedMessage,{defaultMessage:"Show {moreMembersCount} more",id:"spacePermissionsSettings.membersTab.showMore.message",values:{moreMembersCount:r.length-st.defaultLimit}}))))}renderSpaceGuests(e){const{spacePermissionsSettingsStore:t}=this.stores,{guestsFilter:s,limitGuests:a}=t.state,r=this.getFilteredMembers(e,s),n=a?r.slice(0,st.defaultLimit):r;return i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16}},i.a.createElement(Y.b,{placeholder:this.props.intl.formatMessage({id:"spacePermissionsSettings.membersTab.filterGuestsInput.placeholder",defaultMessage:"Filter by email or name…"}),left:R.a.searchThick(this.getSearchIconStyle()),showClearButton:!0,format:Y.b.Format.Small,value:s,style:st.filterStyle,onChange:e=>{t.setState(et({},t.state,{guestsFilter:e.target.value,limitGuests:!0}))}})),this.renderUserTable(n),r.length>st.defaultLimit&&a&&i.a.createElement(Ve.a,{style:st.showMoreButtonStyle,onClick:this.handleGuestsShowMoreClick},i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.membersTab.showMoreGuestsButton.label",defaultMessage:"{numberOfHiddenGuests, plural, one {Show {numberOfHiddenGuests} more} other {Show {numberOfHiddenGuests} more}}",values:{numberOfHiddenGuests:r.length-st.defaultLimit}}))))}renderMobileInviteButton(){return i.a.createElement(n.Fragment,null,i.a.createElement("div",{style:this.mobileMenuItemStyle()},this.renderInviteButton({flex:1})),i.a.createElement("div",{style:{borderBottom:"1px solid ".concat(this.theme.regularDividerColor)}}))}renderInviteButton(e){const{store:t}=this.props;return i.a.createElement(Xe.LazyPermissionsInvite,{disabled:!this.canAdmin(),store:t,onInviteClick:this.handleUpdateClick,onInviteComplete:this.handleUpdateComplete,isSubscribed:this.isSubscribed(),membersOnly:!1,upgradeButtonName:"space_permission_settings",shouldGrow:!1,buttonStyle:e})}renderInviteViaDomainCaption(){const{store:e}=this.props;return c.j(e)?i.a.createElement(Z.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},i.a.createElement(U.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithLinkCaption",defaultMessage:"Manage members here."})):i.a.createElement(Z.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},i.a.createElement(U.FormattedMessage,{id:"spaceBasicSettings.membersTab.manageMembersWithoutLinkCaption",defaultMessage:"Manage members here, or <setupdomainlink>set up a domain</setupdomainlink>, so everyone with allowed email domains can join the workspace automatically.",values:{setupdomainlink:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return i.a.createElement(Ne.a,{onClick:()=>{Ue.a.setState(et({},Ue.a.state,{currentTab:"settings"}))}},t)}}}))}getFilteredMembers(e,t){const{store:s}=this.props;return t&&t.length>0?Object(m.b)(t,e,e=>{const t=u.a.createChildStore(s,{table:l.a,id:e.userId}).getValue();return t?Object(l.f)(t):""}):e}renderUserTable(e){const{store:t}=this.props;return i.a.createElement(se,{columns:[{key:"user",header:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.userTable.userColumn.header",defaultMessage:"User"}),style:{width:"75%"}},{key:"access_level",header:i.a.createElement(U.FormattedMessage,{id:"spacePermissionsSettings.userTable.accessLevelColumn.header",defaultMessage:"Access level"}),style:{width:"25%",textAlign:"center"}}],rows:e.map(e=>{const s=u.a.createChildStore(t,{table:l.a,id:e.userId}).getValue();return{key:e.userId,columns:[this.renderMember(s),i.a.createElement("div",{style:{textAlign:"center"}},this.renderUserPermission(e))]}})})}renderMember(e){if(e)return i.a.createElement("div",{style:{display:"flex",alignItems:"center",maxWidth:300}},i.a.createElement(_e.a,{userValue:e,size:28}),i.a.createElement("div",{style:{minWidth:0,marginLeft:6,marginRight:6}},i.a.createElement(Z.a,{className:"notranslate"},Object(l.e)(e)),i.a.createElement(Z.a,{isSmall:!0},e.email)))}renderUserPermission(e){return"none"===e.role?i.a.createElement(W,{store:this.props.store,guest:e,isSubscribed:this.isSubscribed()}):this.renderMemberRoleSelect(e)}renderMemberRoleSelect(e){const t=this.environment.currentUser.id,{currentUserSettingsStore:s}=Te.default.state;if(s)return i.a.createElement(Q.a,{role:e.role,table:re.a,type:"user_permission",disabled:!this.canAdmin(),isUserPermission:e.userId===t,isSubscribed:this.isSubscribed(),upgradeButtonName:"space_permission_item",onChange:t=>this.handleMemberPermissionRoleChange(e,t,s)})}isSubscribed(){const{data:e}=G.default.state;return Boolean(e&&A.E(e))}canAdmin(){return this.props.store.canAdmin()}canUseGroups(){return A.L(this.environment)&&this.isSubscribed()}canEditGroups(){return this.canUseGroups()&&this.canAdmin()}canUseInviteLink(){return this.canAdmin()&&A.L(this.environment)}shouldRenderUpsell(){const e=this.props.store.getValue();return Boolean(e&&"personal"===e.plan_type&&this.canAdmin())}getInviteLinkEnabled(){const e=this.props.store.getValue();return Boolean(e&&e.invite_link_enabled)}getInviteLink(){const e=G.default.state.data,t=this.props.store.getValue(),s=!e||"subscribed_admin"!==e.type&&"unsubscribed_admin"!==e.type?void 0:e.inviteLinkCode;if(t&&s)return Object(Ke.getSpaceInviteLinkUrl)(this.environment,t,s)}getSearchIconStyle(){return{width:14,height:14,marginRight:6,flexGrow:0,flexShrink:0,fill:this.theme.mediumIconColor}}mobileMenuItemStyle(){const{WindowSizeStore:e}=this.environment;return{display:"flex",paddingTop:14,paddingBottom:14,paddingLeft:14,paddingRight:e.getSafePaddingRightCSS(14),background:this.theme.contentBackground}}}st.defaultLimit=50,st.filterStyle={width:180,borderRadius:30},st.showMoreButtonStyle={marginTop:8};t.a=Object(U.injectIntl)(st)},"5XPD":function(e,t,s){"use strict";var a=s("q1tI"),r=s.n(a),n=s("wldR"),i=s("pqiZ"),o=s("lEhh"),l=s("N34Z"),d=s("MBf9"),c=s("y6Dp"),m=s("QcDD"),p=s("sSHh"),u=s("aEEb"),g=s("J9+s"),h=s("0CAA"),b=s("rQb/");class f extends n.a{renderComponent(){const{device:e}=this.environment,{intl:t}=this.props;return r.a.createElement("div",null,this.renderNotificationHeader(),r.a.createElement("div",{style:this.getSettingsOptionStyle(),className:"notifications-settings"},this.renderSettingsOption(t.formatMessage({id:"notificationSettings.mobilePushNotificationSettings.title",defaultMessage:"Mobile push notifications"}),t.formatMessage({id:"notificationSettings.mobilePushNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments via your mobile app."}),"notify_mobile"),e.isElectron&&r.a.createElement(a.Fragment,null,r.a.createElement(i.a,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.desktopNotificationSettings.title",defaultMessage:"Desktop push notifications"}),t.formatMessage({id:"notificationSettings.desktopNotificationSettings.description",defaultMessage:"Receive push notifications on mentions and comments immediately via your desktop app."}),"notify_desktop")),r.a.createElement(i.a,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.emailNotificationSettings.title",defaultMessage:"Email notifications"}),t.formatMessage({id:"notificationSettings.emailNotificationSettings.description",defaultMessage:"Receive email updates on mentions, comments, and edit digests for all the pages you have followed."}),"notify_email"),this.getSwitchValue("notify_email")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{size:24}),this.renderSettingsOption(t.formatMessage({id:"notificationSettings.emailAlwaysNotificationSettings.title",defaultMessage:"Always send email notifications"}),t.formatMessage({id:"notificationSettings.emailAlwaysNotificationSettings.description",defaultMessage:"Receive updates by email, even when you’re active on the app."}),"notify_email_always")),r.a.createElement(i.a,{size:24}),r.a.createElement("div",{style:{marginTop:4}},r.a.createElement(p.a,{title:t.formatMessage({id:"notificationSettings.helpButton.caption",defaultMessage:"Learn about mobile and desktop notifications"}),href:Object(h.a)("guides.notificationSettings"),analyticsFrom:"notifications_settings"}))))}renderNotificationHeader(){const{device:e}=this.environment;return r.a.createElement(b.a,{large:!e.isMobile||void 0,divider:"full"},r.a.createElement(g.FormattedMessage,{id:"notificationSettings.notificationSection.title",defaultMessage:"Notifications"}))}renderSettingsOption(e,t,s){const{device:a}=this.environment,n=this.getSwitchValue(s);return r.a.createElement("div",{onClick:()=>{this.handleToggle(s),"notify_mobile"===s?c.je(this.environment,{is_on:!n}):"notify_desktop"===s?c.he(this.environment,{is_on:!n}):"notify_email"===s?c.ie(this.environment,{is_on:!n}):"notify_email_always"===s&&c.ie(this.environment,{is_on:!n})},style:{display:"flex",width:"100%",alignItems:"center",cursor:"pointer"}},r.a.createElement("div",{style:{flex:1}},r.a.createElement("div",{style:{fontSize:14}},e),r.a.createElement(u.a,{isSmall:!0,isMultiline:!0,style:{width:"80%",marginTop:4}},t)),r.a.createElement(o.a,{on:Boolean(n),disabled:void 0===n,isAndroid:a.isAndroid}))}getSwitchValue(e){const{currentSpaceViewStore:t}=m.default.state;if(t){const s=t.getValue();if(s)return s[e]}}handleToggle(e){const{currentSpaceViewStore:t}=m.default.state;if(t){const s=t.getValue();if(s){const a=s[e];d.createAndCommit(this.environment,s=>{l.d({store:t,data:{[e]:!a},transaction:s})})}}}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=Object(g.injectIntl)(f)},"8Gp+":function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("J9+s"),i=s("wldR"),o=s("aEEb"),l=s("CSYU"),d=s("nFzZ"),c=s("Pl3d"),m=s("VVh3"),p=s("QcDD"),u=s("bkwR"),g=s("mKX5"),h=s("IULH"),b=s("rQb/");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S extends i.a{constructor(){super(...arguments),this.storeTypes={requestStore:l.a},this.renderResult=(e,t,s)=>r.a.createElement(m.a,{loaded:s,spinnerSize:16,showSpinnerTimeout:600},e||!t?r.a.createElement("div",null,"something went wrong"):this.renderOutput(t)),this.renderOutput=e=>{const t=Boolean(e.expiryTime&&Number(e.expiryTime)>Date.now()),s=t?this.revokeDataAccess:this.grantDataAccess;return r.a.createElement("div",{style:this.getSettingsOptionStyle()},r.a.createElement("div",{style:{display:"flex",alignItems:"flex-start",marginBottom:12,width:"100%"}},r.a.createElement("div",{style:{flex:1}},r.a.createElement(b.a,null,r.a.createElement(n.FormattedMessage,{id:"userDataConsentSettings.header.label",defaultMessage:"Support access"})),r.a.createElement(o.a,{isSmall:!0,isMultiline:!0,style:{marginTop:4,width:"80%"}},t&&e.expiryTime?r.a.createElement(n.FormattedMessage,{id:"userDataConsentSettings.accessGranted.label",defaultMessage:"You have granted Notion access to your account for support purposes until {expiryTime}.",values:{expiryTime:g.a.unix(e.expiryTime/1e3).locale(this.props.intl.locale).format("lll")}}):r.a.createElement(n.FormattedMessage,{id:"userDataConsentSettings.accessNotGranted.label",defaultMessage:"Grant Notion support temporary access to your account so we can troubleshoot problems or recover content on your behalf. You can revoke access at any time."})),r.a.createElement(h.a,{onClick:s,isLarge:!0,style:{marginTop:12,marginBottom:4}},t?r.a.createElement(n.FormattedMessage,{id:"userDataConsentSettings.revokeSupportAccess.button",defaultMessage:"Revoke access"}):r.a.createElement(n.FormattedMessage,{id:"userDataConsentSettings.allowSupportAccess.button",defaultMessage:"Allow support access"})))))},this.fetchUserDataConsentSettings=async e=>{const t=await u.getDataAccessConsent(this.environment,{});if("failed"===t.type)throw t.error;return t.data},this.grantDataAccess=async()=>{await this.setDataAccessExpiryTime({expiryTime:Date.now()+14*d.a})},this.revokeDataAccess=async()=>{await this.setDataAccessExpiryTime({})},this.setDataAccessExpiryTime=async e=>{const t=await u.setDataAccessConsent(this.environment,e);if("success"===t.type&&t.data){const e=this.stores.requestStore.state;this.stores.requestStore.setState(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},e,{result:t.data}))}}}renderComponent(){const{currentUserStore:e}=p.default.state;return e&&r.a.createElement(c.a,{requestStore:this.stores.requestStore,request:{userId:e.id,expiryTime:Date.now()+14*d.a},performRequest:this.fetchUserDataConsentSettings,render:this.renderResult})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=Object(n.injectIntl)(S)},"9hmv":function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("EszA"),i=s("wldR"),o=s("LeVO"),l=s("y6Dp"),d=s("DNgp"),c=s("MeYt"),m=s("zmp8"),p=s("wiBh");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class h extends i.a{constructor(){super(...arguments),this.handleClick=e=>{n.a({environment:this.environment,annotation:[this.props.type]}),this.props.onClick&&this.props.onClick(),l.be(this.environment,{action:this.props.type})},this.isDisabledStore=this.createComputedStore(()=>this.props.disabled||"editing"!==d.default.state.mode)}renderComponent(){return r.a.createElement(o.a,{renderTooltip:()=>this.props.tooltipLabel,render:e=>r.a.createElement(c.a,Object.assign({style:this.getButtonStyle(),disabled:this.isDisabledStore.state,disabledFeedback:this.isDisabledStore.state,onClick:this.handleClick},e),this.props.children)})}getButtonStyle(){return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({display:"flex",alignItems:"center",padding:"0 8px",color:Object(p.b)(this.props.type)?m.f.blue:this.theme.regularTextColor},this.props.style)}}t.a=h},IoOo:function(e,t,s){"use strict";var a=s("q1tI"),r=s.n(a),n=s("J9+s"),i=s("wldR"),o=s("IULH"),l=s("rQb/"),d=s("aEEb"),c=s("prF1");class m extends i.a{renderComponent(){return r.a.createElement("div",null,this.renderHeader(),r.a.createElement("div",{style:this.getSettingsOptionStyle()},r.a.createElement(d.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},this.renderMessage()),this.renderManageSubscriptionButton()))}renderHeader(){const{device:e}=this.environment;return r.a.createElement(l.a,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},r.a.createElement(n.FormattedMessage,{id:"subscriptionSettings.title",defaultMessage:"Subscription"}))}renderMessage(){const{device:e}=this.environment;return e.isMobile?r.a.createElement(n.FormattedMessage,{id:"subscriptionSettings.mobileDescription",defaultMessage:"Manage your Personal Pro subscription though the App Store.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."}):r.a.createElement(n.FormattedMessage,{id:"subscriptionSettings.description",defaultMessage:"You're currently subscribed through an in-app purchase with Apple. You can manage your subscription in Apple's subscription settings.",description:"Description for a button that will take users to Apple's App Store app to edit their subscription."})}renderManageSubscriptionButton(){return r.a.createElement(c.a,{href:"https://apps.apple.com/account/subscriptions"},r.a.createElement(o.a,{isLarge:!0,style:{marginTop:12,marginBottom:4}},r.a.createElement(n.FormattedMessage,{id:"subscriptionSettings.button",defaultMessage:"Manage subscription"})))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=m},L0YQ:function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("wldR"),i=s("Ng05"),o=s("IULH"),l=s("0CAA"),d=s("y6Dp"),c=s("DbeH"),m=s("H4VD"),p=s("Sb6f"),u=s("J9+s");function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class b extends n.a{constructor(){super(...arguments),this.handleUpgradeClick=e=>{const{from:t,for:s,onUpgradeClick:a}=this.props;c.a(this.environment,{from:t,for:s}),a&&a(e)},this.handleLearnMoreClick=()=>{const{from:e,learnMoreRoute:t}=this.props;Object(m.navigateToExternalURL)({environment:this.environment,url:Object(l.a)(t)}),d.C(this.environment,{from:e})}}renderComponent(){return r.a.createElement("section",{style:this.getWrapStyle()},this.renderIcon(),this.renderTitle(),this.renderCaption(),this.renderActions())}renderIcon(){const{icon:e}=this.props;return e(this.getIconStyle())}renderTitle(){const{title:e}=this.props;return r.a.createElement("header",{style:this.getTitleStyle()},e)}renderCaption(){const{caption:e}=this.props;return r.a.createElement("p",{style:this.getCaptionStyle()},e)}renderActions(){return r.a.createElement("footer",null,this.renderUpgradeButton(),this.renderLearnMoreButton())}renderUpgradeButton(){const{upgradeMessage:e}=this.props;return r.a.createElement(i.a,{onClick:this.handleUpgradeClick,isLarge:!0},e||r.a.createElement(u.FormattedMessage,{defaultMessage:"Upgrade",id:"upsellCallout.upgradeButton.text"}))}renderLearnMoreButton(){return r.a.createElement(o.a,{onClick:this.handleLearnMoreClick,style:this.getLearnMoreButtonStyle()},r.a.createElement(u.FormattedMessage,{defaultMessage:"Learn more",id:"upsellCallout.learnMoreButton.text"}))}getWrapStyle(){const{device:e}=this.environment;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({fontSize:14},!e.isMobile&&{maxWidth:340})}getIconStyle(){return{width:32,height:"auto",fill:this.theme.mediumIconColor,marginBottom:8}}getTitleStyle(){return{fontWeight:p.a.fontWeight.semibold}}getCaptionStyle(){return{color:this.theme.mediumTextColor,marginTop:4,marginBottom:16}}getLearnMoreButtonStyle(){return{marginLeft:12}}}t.a=b},"VoJ/":function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("J9+s"),i=s("Pl3d"),o=s("wldR"),l=s("hU3F"),d=s("QcDD"),c=s("RyVQ"),m=s("bkwR"),p=s("VBxf"),u=s("7M94"),g=s("/6eU"),h=s("yNyh"),b=s("IULH"),f=s("Ng05"),y=s("MYfK"),S=s("zmp8"),w=s("aEEb"),M=s("bxQm"),v=s("Z1H8"),E=s("a3T4"),P=s("rQb/"),O=s("zzAG");function C(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?C(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class T extends o.a{constructor(){super(...arguments),this.storeTypes={hasPasswordStore:l.a.of(!1),emailStore:l.a.of("")},this.handleChangePasswordClick=()=>{c.a.setState({open:!0,setNewPassword:!0,password:"",repeatPassword:""})},this.handleOldPasswordChange=e=>{(c.a.isSetNewPasswordModal()||c.a.isRemovePasswordModal())&&c.a.setState(k({},c.a.state,{oldPassword:e.target.value,alert:void 0}))},this.handleClearOldPassword=()=>{(c.a.isSetNewPasswordModal()||c.a.isRemovePasswordModal())&&c.a.setState(k({},c.a.state,{oldPassword:"",alert:void 0}))},this.handlePasswordChange=e=>{c.a.isSetNewPasswordModal()&&c.a.setState(k({},c.a.state,{password:e.target.value,alert:void 0}))},this.handleCancelChangePassword=()=>{const{onCancel:e}=c.a.state;c.a.reset(),e&&e()},this.handleClearPassword=()=>{c.a.isSetNewPasswordModal()&&c.a.setState(k({},c.a.state,{password:"",repeatPassword:"",alert:void 0}))},this.handleRepeatPasswordChange=e=>{c.a.isSetNewPasswordModal()&&c.a.setState(k({},c.a.state,{repeatPassword:e.target.value,alert:void 0}))},this.handleClearRepeatPassword=()=>{c.a.isSetNewPasswordModal()&&c.a.setState(k({},c.a.state,{repeatPassword:"",alert:void 0}))},this.handlePasswordBlur=()=>{if(c.a.isSetNewPasswordModal()){const{password:e,repeatPassword:t}=c.a.state;e&&t&&e!==t&&c.a.setState(k({},c.a.state,{alert:this.props.intl.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordMismatchError",defaultMessage:"Your new password does not match."})}))}},this.handleSubmit=async()=>{if(!c.a.isSetNewPasswordModal())return;const{oldPassword:e,password:t,repeatPassword:s}=c.a.state,a=this.stores.hasPasswordStore.get(),{intl:r}=this.props;let n;if(a&&!e)n=r.formatMessage({id:"passwordSettings.changePasswordModal.oldPasswordMissingError",defaultMessage:"Please enter your old password."});else if(t){const e=Object(E.a)(t);e.success?s?t!==s&&(n=r.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordsMismatchError",defaultMessage:"Your passwords do not match."})):n=r.formatMessage({id:"passwordSettings.changePasswordModal.newPasswordNotRepeatedError",defaultMessage:"Please repeat your new password."}):n=this.getPasswordErrorMessage(e.reason)}else n=r.formatMessage({id:"passwordSettings.changePasswordModal.passwordNotEnteredError",defaultMessage:"Please enter a password."});if(n)return void c.a.setState(k({},c.a.state,{alert:n}));const i=await m.setPassword(this.environment,{oldPassword:e,newPassword:t});if("success"===i.type)this.props.requestStore.refresh(),void 0===e?this.saveNewPasswordSuccess():this.changePasswordSuccess();else{const e=Object(O.b)(this.props.intl,i);c.a.setState(k({},c.a.state,{alert:e}))}},this.handleShowRemovePasswordModalClick=()=>{c.a.setState({open:!0,removePassword:!0,oldPassword:""})},this.handleRemovePasswordClick=async()=>{if(!c.a.isRemovePasswordModal())return;const{oldPassword:e}=c.a.state;if(!e)return void c.a.setState(k({},c.a.state,{alert:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.oldPasswordNotEnteredError",defaultMessage:"Please enter your current password.",description:"We require users to enter their password in a text box before they can delete it. This error message appears if the user attempts to delete their password but hasn't entered it into the text box."})}));const t=await m.setPassword(this.environment,{oldPassword:e,clearPassword:!0});if("success"===t.type)this.props.requestStore.refresh(),this.removePasswordSuccess();else{const e=Object(O.b)(this.props.intl,t);c.a.setState(k({},c.a.state,{alert:e||this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.message",defaultMessage:"Error removing password. Please try again later."})}))}},this.defaultErrorMessage=this.props.intl.formatMessage({id:"passwordSettings.genericPasswordSaveError",defaultMessage:"Error saving password. Please try again later."})}willMount(e){super.willMount(e);const{currentUserStore:t}=d.default.state;if(t){const e=t.getValue();e&&this.stores.emailStore.set(e.email)}}renderComponent(){const e=this.stores.emailStore.get();if(!e)return;const{requestStore:t}=this.props;return r.a.createElement("div",{style:this.getSettingsOptionStyle()},r.a.createElement(P.a,{smallMarginBottom:!0},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.title",defaultMessage:"Password"})),r.a.createElement(i.a,{request:{},requestStore:t,performRequest:async()=>{const t=await m.checkEmailType(this.environment,{email:e,allowAdminBypass:!0});if("success"===t.type){const{samlRedirect:e,hasPassword:s}=t.data;return{samlEnforced:e&&e.enforced,hasPassword:s}}throw t.error},render:(e,t)=>{if(e)return T.renderLabel(r.a.createElement(n.FormattedMessage,{id:"passwordSettings.passwordSetError.message",defaultMessage:"Your password cannot be set at this time. Please try again later."}));if(t){const{samlEnforced:e,hasPassword:s}=t;return e?T.renderLabel(r.a.createElement(n.FormattedMessage,{id:"passwordSettings.passwordManagedThroughSAMLProvider.message",defaultMessage:"Your password is managed through your SAML Single Sign-on Provider.",description:"Message letting users know that their password is managed through a 3rd-party provider, which is why they can't set their password on Notion's password settings page."})):(this.stores.hasPasswordStore.set(Boolean(s)),this.renderPasswordActions())}}}))}renderPasswordActions(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return r.a.createElement(a.Fragment,null,T.renderLabel(r.a.createElement(n.FormattedMessage,{id:"passwordSettings.passwordSetInstructions",defaultMessage:"You can set a permanent password if you don't want to use temporary login codes."})),e&&T.renderLabel(this.renderEducationPlanInfo()),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(b.a,{isLarge:!0,onClick:this.handleChangePasswordClick,style:{marginTop:12,marginBottom:4}},t?r.a.createElement(n.FormattedMessage,{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}):r.a.createElement(n.FormattedMessage,{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})),this.canRemovePassword()&&r.a.createElement(M.a,{onClick:this.handleShowRemovePasswordModalClick,style:{marginLeft:5,marginTop:12,marginBottom:4}},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.removePasswordButton.label",defaultMessage:"Remove password"}))),this.renderPasswordModal())}static renderLabel(e){return r.a.createElement(w.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},e)}renderPasswordModal(){const{device:e}=this.environment,{open:t}=c.a.state;return r.a.createElement(g.a,{open:t,onDismiss:this.handleCancelChangePassword,innerStyle:{width:e.isPhone?"90%":460,minHeight:270,padding:24},className:u.lb,preventHideChildrenWhileOpening:!0,render:()=>r.a.createElement(v.a,{capture:!0,allowEsc:!0,render:()=>r.a.createElement(a.Fragment,null,this.renderSaveNewPassword(),this.renderRemovePassword())})})}renderSaveNewPassword(){const{isEducationPlan:e}=this.props;if(!c.a.isSetNewPasswordModal())return;const{password:t,repeatPassword:s,oldPassword:i,alert:o}=c.a.state,l=this.stores.hasPasswordStore.get(),d=this.stores.emailStore.get();return r.a.createElement(a.Fragment,null,r.a.createElement(h.b,{style:{display:"none"},type:"text",value:d,autoComplete:"username",disabled:!0}),l&&r.a.createElement(a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement(n.FormattedMessage,{id:"passwordSettings.changePasswordModal.oldPasswordInput.label",defaultMessage:"Old Password"})),r.a.createElement(h.b,{type:"password",value:i,onChange:this.handleOldPasswordChange,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.oldPasswordInput.placeholder",defaultMessage:"Enter old password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"})),l?r.a.createElement(y.a,{hasMarginTop:!0},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.newPasswordInput.label",defaultMessage:"New password"})):r.a.createElement(y.a,null,r.a.createElement(n.FormattedMessage,{id:"passwordSettings.passwordInput.label",defaultMessage:"Password"})),r.a.createElement(h.b,{type:"password",value:t,onChange:this.handlePasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.newPasswordInput.placeholder",defaultMessage:"Enter new password..."}),style:{padding:"4px 8px"},focusInitial:!l,onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),r.a.createElement(y.a,{hasMarginTop:!0},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.repeatPasswordInput.label",defaultMessage:"Repeat password"})),r.a.createElement(h.b,{type:"password",value:s,onChange:this.handleRepeatPasswordChange,onSubmit:this.handleSubmit,showClearButton:!0,onClearButtonClick:this.handleClearRepeatPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.repeatPasswordInput.placeholder",defaultMessage:"Repeat new password..."}),style:{padding:"4px 8px"},onBlur:this.handlePasswordBlur,autoComplete:"new-password"}),r.a.createElement(w.a,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.passwordGuidelines",defaultMessage:"Use a password at least 15 letters long, or at least 8 characters long with both letters and numbers."})),e&&r.a.createElement(w.a,{isMultiline:!0,isSecondaryColor:!0,style:{marginTop:14}},this.renderEducationPlanInfo()),this.renderAlert(o),r.a.createElement(f.a,{isLarge:!0,style:{marginTop:14},onClick:this.handleSubmit},l?r.a.createElement(n.FormattedMessage,{id:"passwordSettings.changePasswordButton.label",defaultMessage:"Change password"}):r.a.createElement(n.FormattedMessage,{id:"passwordSettings.setPasswordButton.label",defaultMessage:"Set a password"})))}renderRemovePassword(){const{isEducationPlan:e}=this.props;if(!c.a.isRemovePasswordModal())return;const{oldPassword:t,alert:s}=c.a.state;return r.a.createElement(a.Fragment,null,r.a.createElement("div",{style:{fontSize:14,width:"100%"}},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.removePasswordModal.text",defaultMessage:"You're about to remove your password. We'll email you temporary login codes to access Notion going forward.",description:"Message warning the user that they're about to delete their password, and telling them how to log in after their password has been deleted."}),e&&r.a.createElement(n.FormattedMessage,{id:"passwordSettings.removePasswordModal.educationPlanWarning",defaultMessage:"If you lose access to your school email, you'll be unable to log back into Notion.",description:"Warning for users on the Education Plan that if they lose access to their school email, they won't be able to log into Notion without a password."})),r.a.createElement(y.a,{hasMarginTop:!0},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.deletePasswordModal.passwordInput.label",defaultMessage:"Password"})),r.a.createElement(h.b,{type:"password",value:t,onChange:this.handleOldPasswordChange,onSubmit:this.handleRemovePasswordClick,showClearButton:!0,onClearButtonClick:this.handleClearOldPassword,placeholder:this.props.intl.formatMessage({id:"passwordSettings.removePasswordModal.passwordInput.placeholder",defaultMessage:"Enter your password..."}),style:{padding:"4px 8px"},focusInitial:!0,autoComplete:"current-password"}),this.renderAlert(s),r.a.createElement(f.a,{isLarge:!0,style:{marginTop:14},onClick:this.handleRemovePasswordClick},r.a.createElement(n.FormattedMessage,{id:"passwordSettings.removePasswordModal.removePasswordButton.label",defaultMessage:"Remove password"})))}renderAlert(e){if(e)return r.a.createElement(w.a,{isMultiline:!0,style:{marginTop:8,color:S.f.red}},e)}renderEducationPlanInfo(){return r.a.createElement(n.FormattedMessage,{id:"passwordSettings.educationPlanGuidelines",defaultMessage:"If you lose access to your school email address, you'll be able to log in using your password."})}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}saveNewPasswordSuccess(){const{intl:e,isEducationPlan:t}=this.props,{onSubmit:s}=c.a.state;c.a.reset();const a=t?e.formatMessage({id:"passwordSettings.setPasswordSuccess.educationMessage",defaultMessage:"Your password is all set! You'll be able to log in, even if you lose access to your school email address."}):e.formatMessage({id:"passwordSettings.setPasswordSuccess.message",defaultMessage:"Your password is all set!"});p.showMessage({message:a,onAccept:s})}changePasswordSuccess(){const{onSubmit:e}=c.a.state;c.a.reset(),p.showMessage({message:this.props.intl.formatMessage({id:"passwordSettings.changePasswordSuccess.message",defaultMessage:"Your new password has been saved."}),onAccept:e})}removePasswordSuccess(){c.a.reset(),p.showMessage({message:this.props.intl.formatMessage({id:"passwordSettings.removePasswordSuccess.message",defaultMessage:"Your password has been removed."})})}getPasswordErrorMessage(e){const t=O.d[e.type];return t?this.props.intl.formatMessage(t):this.defaultErrorMessage}canRemovePassword(){const{isEducationPlan:e}=this.props,t=this.stores.hasPasswordStore.get();return!e&&t}}t.a=Object(n.injectIntl)(T)},ibYI:function(e,t,s){"use strict";var a=s("q1tI"),r=s.n(a),n=s("J9+s"),i=s("wldR"),o=s("rQb/"),l=s("lEhh"),d=s("aEEb");class c extends i.a{renderComponent(){const{device:e}=this.environment;return r.a.createElement("div",{style:this.getSettingsOptionStyle()},r.a.createElement(o.a,null,r.a.createElement(n.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.label",defaultMessage:"Start week on Monday"})),r.a.createElement("div",{onClick:this.props.onClick,style:{display:"flex",alignItems:"flex-start",marginBottom:12,cursor:"pointer",width:"100%"}},r.a.createElement("div",{style:{flex:1}},r.a.createElement(d.a,{isSmall:!0,isMultiline:!0,style:{width:"80%"}},r.a.createElement(n.FormattedMessage,{id:"calendarSettings.startWeekOnMonday.message",defaultMessage:"This will change how all calendars in your app look."}))),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(l.a,{on:1===this.props.startDayOfWeek,isAndroid:e.isAndroid}))))}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=c},q8I6:function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("GQP/"),i=s("wldR"),o=s("LeVO"),l=s("TDb4"),d=s("y6Dp"),c=s("MeYt"),m=s("DNgp"),p=s("ieCD"),u=s("wiBh"),g=s("J9+s"),h=s("cBa6");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S extends i.a{constructor(){super(...arguments),this.handleButtonPopupClick=()=>{n.c({focus:!0}),d.be(this.environment,{action:h.b.Link})}}renderComponent(){const e=Object(u.b)(h.b.Link),t=this.isDisabled();return r.a.createElement(o.a,{renderTooltip:()=>r.a.createElement(a.Fragment,null,r.a.createElement("div",null,r.a.createElement(g.FormattedMessage,{defaultMessage:"Add link",id:"selectionLinkButton.addLink.tooltip",description:"Prompt for the user to add a URL to link to from the selected text."})),r.a.createElement("div",null,r.a.createElement(l.a,{style:{color:this.theme.mediumInvertedTextColor},name:"openLinkMenu"}))),render:s=>r.a.createElement(c.a,Object.assign({style:f({display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8},e&&{color:this.theme.blueColor},{whiteSpace:"nowrap"},this.props.style),disabled:t,disabledFeedback:t},s,{onClick:this.handleButtonPopupClick}),this.props.children)})}isDisabled(){return!!this.props.disabled||("editing"!==m.default.state.mode&&!p.a.state.open||!!(Object(u.o)(h.b.User)||Object(u.o)(h.b.Bot)||Object(u.o)(h.b.Date)||Object(u.o)(h.b.Page)))}}t.a=Object(g.injectIntl)(S)},ty0h:function(e,t,s){"use strict";var a=s("q1tI"),r=s.n(a),n=s("J9+s"),i=s("mF3+"),o=s("i3uR"),l=s("SR/M"),d=s("wldR"),c=s("gbGO"),m=s("WgIs"),p=s("IULH"),u=s("2Y+N"),g=s("rQb/"),h=s("aEEb"),b=s("wvIE"),f=s("ZAZ2");const y=["system","light","dark"],S=Object(n.defineMessages)({systemLabel:{id:"appearanceSetting.system.label",defaultMessage:"Use system setting"},lightLabel:{id:"appearanceSetting.light.label",defaultMessage:"Light"},darkLabel:{id:"appearanceSetting.dark.label",defaultMessage:"Dark"}});class w extends d.a{constructor(){super(...arguments),this.storeTypes={appearanceStore:f.a},this.handleChangeAppearance=e=>{Object(b.b)(this.environment,e),this.stores.appearanceStore.setState({appearanceSetting:e})}}componentDidMount(){const e=Object(b.a)(this.environment);this.stores.appearanceStore.setState({appearanceSetting:e})}renderComponent(){return r.a.createElement("div",null,this.renderHeader(),r.a.createElement("div",{style:this.getSettingsOptionStyle()},r.a.createElement(h.a,{isSmall:!0,isMultiline:!0,style:{marginTop:2,width:"80%"}},r.a.createElement(n.FormattedMessage,{id:"appearanceSettings.description.message",defaultMessage:"Customize how Notion looks on your device."})),this.renderAppearanceButton()))}renderHeader(){const{device:e}=this.environment;return r.a.createElement(g.a,{large:!e.isMobile||void 0,divider:e.isMobile?void 0:"full"},r.a.createElement(n.FormattedMessage,{id:"appearanceSettings.title",defaultMessage:"Appearance"}))}renderAppearanceButton(){const{device:e}=this.environment;return r.a.createElement(o.a,{popupType:e.isMobile?o.a.PopupType.SlideUp:o.a.PopupType.Popup,placementToOrigin:o.a.Placement.Right,renderOrigin:e=>r.a.createElement(p.a,Object.assign({},e,{isLarge:!0,style:{marginTop:12,marginBottom:4}}),w.getAppearanceLabel(this.stores.appearanceStore.state.appearanceSetting),i.a.chevronDown({width:10,marginLeft:4,fill:this.theme.lightIconColor})),render:t=>{let s;s=e.isMobile?{menuType:c.b.MenuType.Modal,title:r.a.createElement(n.FormattedMessage,{defaultMessage:"Appearance",id:"appearanceSettings.modal.title"}),right:r.a.createElement(n.FormattedMessage,{defaultMessage:"Done",id:"appearanceSettings.modal.done"}),onClickRight:t.close}:{menuType:c.b.MenuType.Popup,width:250};const a=y.map(e=>({key:e,action:s=>{this.handleChangeAppearance(e),t.close()},render:(t,s)=>r.a.createElement(l.a,Object.assign({},t,{title:w.getAppearanceLabel(e)}))}));return r.a.createElement(c.b,Object.assign({},s),r.a.createElement(m.a,{type:m.a.Type.Vertical,sections:[{key:"appearance section",render:e=>r.a.createElement(u.a,Object.assign({},e)),items:a}],initialFocus:void 0}))}})}static getAppearanceLabel(e){switch(e){case"light":return r.a.createElement(n.FormattedMessage,Object.assign({},S.lightLabel));case"dark":return r.a.createElement(n.FormattedMessage,Object.assign({},S.darkLabel));case"system":return r.a.createElement(n.FormattedMessage,Object.assign({},S.systemLabel))}}getSettingsOptionStyle(){const{device:e,WindowSizeStore:t}=this.environment;return{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%",height:"auto",paddingLeft:e.isMobile?t.state.paddingLeftCSS:0,paddingRight:e.isMobile?t.state.paddingRightCSS:0}}}t.a=w},typy:function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("i3uR"),i=s("wldR"),o=s("LeVO"),l=s("uSCg"),d=s("y6Dp"),c=s("MeYt"),m=s("DNgp"),p=s("mF3+"),u=s("WgIs"),g=s("gbGO"),h=s("2Y+N"),b=s("EszA"),f=s("zmp8"),y=s("I5tp"),S=s("Sb6f"),w=s("BTUg"),M=s("2HDO"),v=s("6nbh"),E=s("cBa6"),P=s("TDb4"),O=s("wiBh"),C=s("J9+s"),k=s("nPEg");function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const F=r.a.Fragment;class B extends i.a{constructor(){super(...arguments),this.storeTypes={ignoreSelectionAreaStore:v.a},this.renderHighlightColorMenuItem=(e,t,s,a)=>({key:t||e,action:()=>{s(),this.menuItemAction(e),a.close()},render:s=>r.a.createElement(y.a,Object.assign({},s,{color:e,overrideDisplayName:t}))}),this.handleToggleHighlightAnnotation=()=>{b.a({environment:this.environment,annotation:["h",w.a.state.color]}),d.be(this.environment,{action:"h",color:w.a.state.color})},this.handleButtonPopupClick=e=>{d.be(this.environment,{action:"h"})},this.handleClose=()=>{m.default.emit()},this.menuItemAction=e=>{b.b({environment:this.environment,annotationType:"h"}),"default"!==e&&(w.a.setHighlightColor(e),this.handleToggleHighlightAnnotation())}}renderComponent(){const{device:e}=this.environment,{intl:t}=this.props;return r.a.createElement(n.a,{popupType:e.isMobile?n.a.PopupType.SlideUp:n.a.PopupType.Popup,originGap:4,onClose:this.handleClose,onClick:this.handleButtonPopupClick,renderOrigin:t=>r.a.createElement(o.a,{renderTooltip:()=>r.a.createElement(F,null,r.a.createElement("div",null,r.a.createElement(C.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.textColor.tooltip"})),r.a.createElement("div",null,r.a.createElement(P.a,{style:{color:this.theme.mediumInvertedTextColor},name:"toggleHighlight"}))),render:s=>r.a.createElement(c.a,Object.assign({style:T({display:"flex",alignItems:"center",paddingLeft:7,paddingRight:6,whiteSpace:"nowrap"},this.props.style),disabled:this.props.disabled,disabledFeedback:this.props.disabled},Object(l.a)(t,s)),r.a.createElement("div",{style:this.getColorIconStyle()},e.isMobile?r.a.createElement(C.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.mobileColorIcon.label"}):"A"),p.a.chevronDown({width:10,marginLeft:e.isMobile?4:3,fill:"dark"===this.theme.mode?f.f.white:this.theme.lightIconColor}))}),render:s=>{let a;return a=e.isMobile?{menuType:g.b.MenuType.Modal,title:r.a.createElement(C.FormattedMessage,{defaultMessage:"Text color",id:"highlightSelectionButton.mobileTextColor.label"}),right:r.a.createElement(k.CancelMenuText,null),onClickRight:()=>{s.close()}}:{menuType:g.b.MenuType.Popup},r.a.createElement(g.b,Object.assign({},a),r.a.createElement(M.a,{capture:e.isMobile,store:this.stores.ignoreSelectionAreaStore,ignoreBlockSelection:!1,restoreSelection:!0,focusOffscreenInput:!1,render:e=>{const a=f.b.map(t=>this.renderHighlightColorMenuItem(t,void 0,e,s)),n=[this.renderHighlightColorMenuItem("default",t.formatMessage({defaultMessage:"Default background",id:"highlightSelectionButton.defaultBackground.label"}),e,s),...f.a.map(t=>this.renderHighlightColorMenuItem(t,void 0,e,s))],i=w.a.state.color;return r.a.createElement(u.a,{type:u.a.Type.Vertical,sections:[{key:0,items:[{key:0,action:()=>{e(),this.menuItemAction(i),s.close()},render:e=>r.a.createElement(y.a,Object.assign({},e,{color:i,shortcuts:["toggleHighlight"]}))}],render:e=>r.a.createElement(h.a,Object.assign({},e,{title:r.a.createElement(C.FormattedMessage,{defaultMessage:"Last used",id:"highlightSelectionButton.lastUsedSection.label"}),isTitleUppercase:!0}))},{key:1,items:a,render:e=>r.a.createElement(h.a,Object.assign({},e,{title:r.a.createElement(C.FormattedMessage,{defaultMessage:"Color",id:"highlightSelectionButton.colorSection.label"}),isTitleUppercase:!0}))},{key:2,items:n,render:e=>r.a.createElement(h.a,Object.assign({},e,{title:r.a.createElement(C.FormattedMessage,{defaultMessage:"Background",id:"highlightSelectionButton.backgroundSection.label"}),isTitleUppercase:!0}))}],initialFocus:void 0})}}))}})}getTextSelectionColor(){const e=Object(O.b)("h");return e?E.Q(e):"default"}getColorIconStyle(){const{device:e}=this.environment;return T({display:"inline-flex",alignItems:"center",justifyContent:"center",height:18,textAlign:"center",fontSize:15,borderRadius:2},!e.isMobile&&{width:18,fontWeight:S.a.fontWeight.medium,marginBottom:2},{},Object(f.k)(this.getTextSelectionColor(),this.theme))}}t.a=Object(C.injectIntl)(B)},xPzf:function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("cBa6"),i=s("MeYt"),o=s("Rnyl"),l=s("xstG"),d=s("wiBh"),c=s("J9+s"),m=s("TDb4"),p=s("wldR"),u=s("LeVO"),g=s("DNgp");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class y extends p.a{constructor(){super(...arguments),this.renderMenuTooltip=()=>{const e=this.getThemeColors();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(c.FormattedMessage,{id:"richTextMenu.equationButton.tooltip",defaultMessage:"Create equation"})),r.a.createElement("div",null,r.a.createElement(m.a,{style:e.keyboardShortcut,name:"openEquationMenu"})))},this.handleButtonPopupClick=e=>{const{onClick:t}=this.props;o.b({environment:this.environment,analyticsFrom:"rich_text_menu"}),t&&t(e)},this.isSelected=()=>Object(d.b)(n.b.Equation),this.isDisabled=()=>{const{disabled:e}=this.props;if(e)return!0;if("editing"!==g.default.state.mode&&!l.a.isOpen())return!0;const t={[n.b.User]:n.b.User,[n.b.Page]:n.b.Page,[n.b.Bot]:n.b.Bot,[n.b.Date]:n.b.Date,[n.b.TemporaryPage]:n.b.TemporaryPage};for(const s of Object.values(t))if(Object(d.o)(s))return!0;return!1},this.styles={equationButton:{display:"flex",alignItems:"center",borderRadius:0,paddingLeft:7,paddingRight:8}}}renderComponent(){const{style:e,children:t}=this.props,s=this.getThemeColors(),a=this.isDisabled();return r.a.createElement(u.a,{renderTooltip:this.renderMenuTooltip,render:n=>r.a.createElement(i.a,Object.assign({style:b({},this.styles.equationButton,{},s.equationButton,{},e),disabled:a,disabledFeedback:a,onClick:this.handleButtonPopupClick},n),t)})}getThemeColors(){return{equationButton:{color:this.isSelected()?this.theme.blueColor:this.theme.regularTextColor},keyboardShortcut:{color:this.theme.mediumInvertedTextColor}}}}t.a=Object(c.injectIntl)(y)},y4kc:function(e,t,s){"use strict";s("ioFf"),s("rGqo");var a=s("q1tI"),r=s.n(a),n=s("gRnv"),i=s("wldR"),o=s("LeVO"),l=s("TDb4"),d=s("mF3+"),c=s("y6Dp"),m=s("DNgp"),p=s("MeYt"),u=s("J9+s");function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,a)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class f extends i.a{constructor(){super(...arguments),this.handleClick=e=>{const t=m.default.state;if("editing"===t.mode){const e=t.store;n.e({environment:this.environment,textStore:e,blockStore:this.props.blockStore,selection:t.selection})}c.be(this.environment,{action:"comment"})}}renderComponent(){const{device:e}=this.environment,t=e.isMobile;return r.a.createElement(o.a,{renderTooltip:()=>r.a.createElement(a.Fragment,null,r.a.createElement("div",null,r.a.createElement(u.FormattedMessage,{defaultMessage:"Comment on selected text",id:"inlineCommentButton.tooltip"})),r.a.createElement("div",null,r.a.createElement(l.a,{style:{color:this.theme.mediumInvertedTextColor},name:"comment"}))),render:e=>r.a.createElement(p.a,Object.assign({style:h({display:"flex",alignItems:"center",padding:"0 8px",whiteSpace:"nowrap"},this.props.style),disabled:this.props.disabled,disabledFeedback:this.props.disabled,onClick:this.handleClick},e),d.a.speechBubbleThin({width:t?18:16,height:t?18:16,marginTop:t?0:1,marginRight:4}),!t&&r.a.createElement(u.FormattedMessage,{defaultMessage:"Comment",id:"inlineCommentButton.commentLabel"}))})}}t.a=f}}]);